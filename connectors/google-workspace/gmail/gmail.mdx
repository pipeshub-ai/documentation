---
title: "Gmail"
description: "Email management and communication connector"
icon: "/logo/gmail.png"
---

<div className="max-w-2xl mx-auto mt-12">
  <div className="p-6 border rounded-lg bg-red-50">
    <div className="flex items-center mb-4">
      <img 
        src="/logo/gmail.png" 
        alt="Gmail Logo" 
        className="w-8 h-8 mr-3 object-contain flex-shrink-0"
      />
      <h2 className="text-2xl font-semibold m-0"> Gmail</h2>
    </div>
    <p className="text-lg text-gray-700 mb-4">Email management and communication</p>
    <div className="flex items-center gap-2">
      <span className="px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm font-medium">
        âœ… Ready
      </span>
      <span className="px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm font-medium">
        ðŸ“– Documentation Available
      </span>
    </div>
  </div>
</div>

## Configuration Guide

<AccordionGroup type="single" collapsible>

<Accordion title="Enterprise Setup">

<div className="mt-4">

## Overview

The Gmail connector allows you to access, manage, and synchronize email data from Gmail, including attachments and embedded documents.

Gmail is Google's email service that provides access to emails, attachments, and related content. This connector enables synchronization of Gmail data including emails and their associated documents (Google Docs, Sheets, and Slides).

### Authentication

The Gmail connector uses OAuth 2.0 for authentication. This requires users to grant permission for the application to access their Gmail data within the scopes specified.

## How to configure and enable the Gmail Connector

### Step 1: Create a Google Cloud Project & Set Up Admin Access

1. **Sign in as Super Administrator:**  
   Log in to the [Google Cloud Console](https://console.cloud.google.com/) using an account with super administrator privileges.

2. **Create a New Project:**
   - Click on the project dropdown at the top of the console and select **New Project**
   - Enter a project name and (optionally) assign it to a folder or organization
   - Click **Create**

<div style={{ textAlign: "center" }}>
  <img
    src="/images/connectors/googleWorkspace/enterprise/create_project.png"
    alt="Create Google Cloud Project"
    style={{ display: 'block', margin: '0 auto' }}
    width="90%"
  />
</div>

<Info>
  Only the project creator has full control by default. It is recommended to add at least one additional administrator (using the IAM settings) to ensure continued access even if the original creator leaves your organization.
</Info>

### Step 2: Enable Required APIs

1. Navigate to **APIs & Services > Library** in the Cloud Console

2. Search for and enable the following APIs required for Gmail sync:
   - **Gmail API** (required for email access)
   - **Google Docs API** (required for Google Docs attachments)
   - **Google Sheets API** (required for Google Sheets attachments)
   - **Google Slides API** (required for Google Slides attachments)
   - **Admin SDK API** (required for domain-wide delegation)

<div style={{ textAlign: "center", padding: "5px" }}>
  <img
    src="/images/connectors/googleWorkspace/enterprise/apis.png"
    alt="Enabled Google APIs in Google Cloud Console"
    style={{ display: 'block', margin: '0 auto' }}
    width="80%"
  />
</div>

<Warning>
  Make sure that all of the listed APIs are enabled to ensure smooth operation of the Gmail connector.
</Warning>

### Step 3: Create a Service Account

1. Navigate to **IAM & Admin > Service Accounts** in the Cloud Console
2. Click **Create Service Account**
<div style={{ textAlign: "center" }}>
  <img
    src="/images/connectors/googleWorkspace/enterprise/service_account.png"
    alt="Create Service Account"
    style={{ display: 'block', margin: '0 auto' }}
    width="90%"
  />
</div>
3. Enter a **Service Account Name** and an optional **Description**
4. Click **Create and Continue**, then **Done**

<div style={{ textAlign: "center" }}>
  <img
    src="/images/connectors/googleWorkspace/enterprise/create_service_account.png"
    alt="Create Service Account"
    style={{ display: 'block', margin: '0 auto' }}
    width="80%"
  />
</div>
5. Copy the **Unique ID** for use in the next step
<div style={{ textAlign: "center" }}>
  <img
    src="/images/connectors/googleWorkspace/enterprise/copy_id.png"
    alt="Copy Service Account ID"
    style={{ display: 'block', margin: '0 auto' }}
    width="80%"
  />
</div>

### Step 4: Delegate Domain-Wide Authority

1. Sign in to the [Google Admin Console](https://admin.google.com/) with a super administrator account
2. Navigate to **Security > Access and data control > API controls**
3. Click **Manage Domain Wide Delegation**
4. Click **Add new** and paste the service account's client ID
5. Add the following OAuth scopes required for Gmail sync:
```
https://www.googleapis.com/auth/admin.directory.group.readonly,https://www.googleapis.com/auth/admin.reports.audit.readonly,https://www.googleapis.com/auth/admin.directory.user.readonly,https://www.googleapis.com/auth/admin.directory.domain.readonly,https://www.googleapis.com/auth/admin.directory.orgunit,https://www.googleapis.com/auth/gmail.readonly,https://www.googleapis.com/auth/documents.readonly,https://www.googleapis.com/auth/spreadsheets.readonly,https://www.googleapis.com/auth/presentations.readonly
```

<Info>

  These scopes are required for Gmail synchronization:
  - `gmail.readonly`: Access to read Gmail messages
  - `documents.readonly`: Access to Google Docs files attached to emails
  - `spreadsheets.readonly`: Access to Google Sheets files attached to emails
  - `presentations.readonly`: Access to Google Slides files attached to emails
  - Admin scopes: Required for domain-wide delegation
</Info>

6. Click **Authorize**

<Info>
  Domain-wide delegation lets your service account impersonate users within your domain. Make sure that both the service account and the end user email belong to the same domain.
</Info>

### Step 5: Create a JSON Key for the Service Account

1. In the Service Accounts list, select your newly created service account
2. Click on the **Keys** tab
3. Click **Add Key** and select **Create new key**
4. Choose **JSON** as the key type and click **Create**
5. Save the automatically downloaded JSON key file

<Warning>
  Store this JSON file securely as it contains sensitive credentials and cannot be recovered if lost.
</Warning>

<Note>
    It might be that while creating the key you get the error:
    
    <div style={{ textAlign: "center" }}>
      <img
        src="/images/connectors/googleWorkspace/enterprise/org_policy_error.png"
        alt="Organization Policy Error"
        style={{ display: 'block', margin: '0 auto' }}
        width="80%"
      />
    </div>
    
    In this case, follow the steps given under the heading [Enable Service Account Key Creation](#enable-service-account-key-creation). <br/>
    If your key was successfully created and downloaded, you can use that key in the enterprise search application.

</Note>

### Configuring and enabling connector


1. Navigate to the **Connectors** page in your account settings:
   - Go to **Account > Company Settings > Settings > Connectors**

<div style={{ textAlign: "center", padding: "5px" }}>
  <img
    src="/images/connectors/common/empty_connector_list_state.png"
    alt="Empty connector list"
    style={{ display: 'block', margin: '0 auto' }}
    width="80%"
  />
</div>


2. Click on **"Add New Connectors"** or **"Browse Available Connectors"** view available connectors

<div style={{ textAlign: "center", padding: "5px" }}>
  <img
    src="/images/connectors/common/connector_list_regsitry.png"
    alt="Connector registry"
    style={{ display: 'block', margin: '0 auto' }}
    width="80%"
  />
</div>

3. Find and click on the **Gmail** connector card to create a new connector instance

4. In the configuration dialog that opens:
   - Enter an **Instance Name** for your connector (e.g., "Company Gmail")
   - Enter the **Admin Email** (Admin user's email with which you created the Google Cloud credentials)
   - Select the **JSON** key file to upload
   - Click on **Save** button to save the configuration
<div style={{ textAlign: "center" }}>
  <img
    src="/images/connectors/googleWorkspace/enterprise/gmail_configuration.png"
    alt="Configure Gmail connector"
    style={{ display: 'block', margin: '0 auto' }}
    width="90%"
  />
</div>

5. After saving, you will be redirected to the connector instance page. To enable the connector:
   - Use the **Sync toggle switch** to enable data synchronization
   - The connector will start syncing Gmail data once enabled
<div style={{ textAlign: "center" }}>
  <img
    src="/images/connectors/googleWorkspace/enterprise/gmail_sync_state.png"
    alt="Gmail connector sync status"
    style={{ display: 'block', margin: '0 auto' }}
    width="90%"
  />
</div>

### Enable Service Account Key Creation

If you encounter an error while creating the service account key due to organization policy constraints, follow these steps:

#### 1. Switch to the Organization Context

At the top of the Google Cloud Console (where the project name is shown), click the drop-down to see a list of organizations and projects.

Select your organization rather than a specific project.

If you don't see an organization listed, make sure you're signed in with an account that has access to the organization.


#### 2. Add Organisation Policy Administrator Role

Navigate to **IAM & Admin > IAM** in the Cloud Console

Find the current user and Click on the **Pencil** icon.

Click on the **Add another role** button.

Search for the **Organisation Policy Administrator** role.

Click on the **Add** button.

<div style={{ textAlign: "center" }}>
  <img
    src="/images/connectors/googleWorkspace/enterprise/org_policy_admin.png"
    alt="Add Organisation Policy Administrator"
    style={{ display: 'block', margin: '0 auto' }}
    width="80%"
  />
</div>

Click on the **Save** button.

#### 3. Disable the Service Account Key Creation constraint

Navigate to **IAM & Admin > Organization Policies** in the Cloud Console

Search for `"iam.disableServiceAccountKeyCreation"`

Select the policy

Click on the **Manage Policy** button

In Policy source, Select **Override parent's policy**. Add a rule and set the enforcement to "Off"

Click on the **Save** button

After completing these steps, return to [Step 5](#step-5%3A-create-a-json-key-for-the-service-account) and try creating the service account key again.

## Google PubSub Configuration

PubSub setup enables real-time updates for Gmail content. While optional, it's highly recommended for maintaining up-to-date content in Enterprise search.

### Step 1: Set Up a Cloud Pub/Sub Topic

1. Navigate to **Pub/Sub > Topics** in the Cloud Console sidebar
2. Click **Create Topic**
3. Enter a unique name (e.g., `projects/your-project-id/topics/gmail-webhook-topic`)
4. Check **"Add a default subscription"**
5. Click **Create** to confirm

<div style={{ textAlign: "center" }}>
  <img
    src="/images/connectors/googleWorkspace/enterprise/topic.png"
    alt="Create Topic"
    style={{ display: 'block', margin: '0 auto' }}
    width="80%"
  />
</div>

### Step 2: Configure the Subscription

1. Go to **Pub/Sub > Topics**
2. Select the subscription created with the topic
3. Click **Edit**
4. Change Delivery type to **"Push"**
5. Set Endpoint URL as **"_your_base_url_/gmail/webhook"**
6. Adjust Expiry Period as needed
7. Click **Update**

<Warning>
  Ensure your base URL matches the Enterprise search connector service base URL
</Warning>

### Step 3: Set Topic Permissions

1. In **Pub/Sub > Topics**, select your topic
2. Open the Info Panel (right side)
3. Click **Add Principals**
4. Add `gmail-api-push@system.gserviceaccount.com`
5. Assign the **Pub/Sub Publisher** role

<div style={{ textAlign: "center" }}>
  <img
    src="/images/connectors/googleWorkspace/enterprise/publisher_principals.png"
    alt="Add Principals"
    style={{ display: 'block', margin: '0 auto' }}
    width="60%"
  />
</div>

6. Click **Save**

<Info>
  If you encounter an organizational policy constraint error, modify the policy in organizational policies to allow the given domain. Allow 5-10 minutes for changes to propagate.
</Info>

</div>

</Accordion>

<Accordion title="Individual Setup">

<div className="mt-4">

## Overview

The Gmail connector allows you to access, manage, and synchronize email data from Gmail, including attachments and embedded documents.

Gmail is Google's email service that provides access to emails, attachments, and related content. This connector enables synchronization of Gmail data including emails and their associated documents (Google Docs, Sheets, and Slides).

### Authentication

The Gmail connector uses OAuth 2.0 for authentication. This requires users to grant permission for the application to access their Gmail data within the scopes specified.

### Step 1: Create a Google Cloud Project

1. Access the [Google Cloud Console](https://console.cloud.google.com/)
2. Create a project (if you don't have one)
3. Note your project ID for later use

### Step 2: Enable Required APIs

1. Navigate to **APIs & Services > Library** in the Cloud Console
2. Search for and enable the following APIs required for Gmail sync:
   - **Gmail API** (required for email access)
   - **Google Docs API** (required for Google Docs attachments)
   - **Google Sheets API** (required for Google Sheets attachments)
   - **Google Slides API** (required for Google Slides attachments)

<div style={{ textAlign: "center", padding: "5px" }}>
  <img
    src="/images/connectors/googleWorkspace/enterprise/apis.png"
    alt="Enabled Google APIs in Google Cloud Console"
    style={{ display: 'block', margin: '0 auto' }}
    width="80%"
  />
</div>


<Warning>
  Make sure that all of the listed APIs are enabled to ensure smooth operation of the Gmail connector.
</Warning>

### Step 3: Configure OAuth Consent Screen

1. Navigate to **APIs & Services > OAuth consent screen** in the Cloud Console
2. Configure the OAuth consent screen with your application details
3. Add the required scopes (see Step 5)

### Step 4: Create OAuth Client ID

1. Navigate to **APIs & Services > Credentials** in the Cloud Console
2. Click **Create Credentials** and select **OAuth client ID**
3. Select **Web application** as the application type
4. Set the **Authorized redirect URI** to:
   ```
   http://your-frontend-dns/connectors/oauth/callback/Gmail
   ```
   or for HTTPS:
   ```
   https://your-frontend-dns/connectors/oauth/callback/Gmail
   ```
5. Click **Create** and note your **Client ID** and **Client Secret**

<Info>
  Redirect URI must match exactly your frontend URL. For example: if your app is
  running on https://f7f0-240.ngrok-free.app then redirect URI should be
  https://f7f0-240.ngrok-free.app/connectors/oauth/callback/Gmail
  in Google Cloud Console.
</Info>

### Step 5: Configure OAuth Scopes

1. In the **OAuth consent screen**, navigate to the **Scopes** section
2. Add the following OAuth scopes required for Gmail sync:
   - `https://www.googleapis.com/auth/gmail.readonly` - Read Gmail messages
   - `https://www.googleapis.com/auth/documents.readonly` - Read Google Docs files
   - `https://www.googleapis.com/auth/spreadsheets.readonly` - Read Google Sheets files
   - `https://www.googleapis.com/auth/presentations.readonly` - Read Google Slides files

<Info>
  These scopes allow the connector to:
  - Access and read Gmail messages
  - Access Google Docs, Sheets, and Slides files that are attached to or embedded in emails
</Info>

### Configuring and enabling connector

1. Navigate to the **Connectors** page in your account settings:
   - Go to **Account > Individual Settings > Settings > Connectors**

<div style={{ textAlign: "center", padding: "5px" }}>
  <img
    src="/images/connectors/common/empty_connector_list_state.png"
    alt="Empty connector list"
    style={{ display: 'block', margin: '0 auto' }}
    width="80%"
  />
</div>


2. Click on **"Add New Connectors"** or **"Browse Available Connectors"** view available connectors

<div style={{ textAlign: "center", padding: "5px" }}>
  <img
    src="/images/connectors/common/connector_list_regsitry.png"
    alt="Connector registry"
    style={{ display: 'block', margin: '0 auto' }}
    width="80%"
  />
</div>

3. Find and click on the **Gmail** connector card to create a new connector instance

4. In the configuration dialog that opens:
   - Enter an **Instance Name** for your connector (e.g., "My Gmail")
   - Enter the **Google Client ID** from your Google Cloud Console
   - Enter the **Google Client Secret** from your Google Cloud Console
   - Click on **Save** button to save the configuration

     <div style={{ textAlign: "center" }}>
       <img
         src="/images/connectors/googleWorkspace/individual/gmail_configuration.png"
         alt="Gmail auth configuration"
         width="90%"
       />
     </div>

5. After saving, you will be redirected to the connector instance page. To enable the connector:
  
  <div style={{ textAlign: "center" }}>
     <img
       src="/images/connectors/googleWorkspace/individual/gmail_pre_auth_state.png"
       alt="Gmail connector before authentication"
       width="90%"
     />
   </div>

   - Click on the **Authenticate** button (or use the Sync toggle switch)
   - You will be redirected to Google's consent screen where you need to sign in and grant permission for Gmail and related document access
  

   <div style={{ textAlign: "center" }}>
     <img
       src="/images/connectors/googleWorkspace/individual/gmail_consent_screen.png"
       alt="Google consent screen for Gmail connector"
       width="90%"
     />
   </div>

6. After giving consent, it will redirect to the frontend and if the Google Workspace shows enabled, then your connector is successfully configured and enabled.
   {" "}
   <div style={{ textAlign: "center" }}>
     <img
       src="/images/connectors/googleWorkspace/individual/gmail_sync_state.png"
       alt="Gmail connector sync status"
       width="90%"
     />
   </div>

<Info>Give consent with the same email as used for email in PipesHub.</Info>

<Info>
  For setting up Google PubSub notifications, please refer to the [Google PubSub Configuration Guide](/enterprise/connectors/googleWorkspace#google-pubsub-configuration) in the Enterprise documentation.
</Info>

</div>

</Accordion>

</AccordionGroup>

<div className="text-center mt-12 p-6 bg-gray-50 rounded-lg max-w-2xl mx-auto">
  <h3 className="text-lg font-semibold mb-2">Ready to Get Started?</h3>
  <p className="text-gray-600">
    The Gmail connector is fully operational and ready for use. Follow the configuration guide above for your setup type (Enterprise or Individual), or reach out to our support team if you need assistance.
  </p>
</div>
